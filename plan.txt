# План миграции на Redux Toolkit

## Текущее состояние
Проанализированы существующие контексты:
- CartContext - управление корзиной (состояние + API вызовы)
- ProductsContext - управление товарами (фильтрация, сортировка, загрузка)
- AuthContext - аутентификация пользователя
- useCart, useProducts, useUsers - хуки для API вызовов

## Этапы миграции

### 1. Создание Redux структуры
- [x] Установить redux-toolkit и react-redux
- [x] Проанализировать существующие контексты и хуки
- [ ] Создать store файл с настройками
- [ ] Создать slice для cart
- [ ] Создать slice для products
- [ ] Создать slice для auth
- [ ] Создать slice для users

### 2. Реализация слайсов

#### Cart Slice
- Состояние: cartItems[], loading, error
- Actions: addToCart, removeFromCart, clearCart, loadCart
- Async thunks для API вызовов
- Selectors для получения данных

#### Products Slice
- Состояние: products[], filter, sortKey, loading, error
- Actions: setFilter, setSortKey
- Async thunk для загрузки продуктов
- Selectors для получения отфильтрованных/отсортированных продуктов

#### Auth Slice
- Состояние: user, loading, error, isAuthenticated
- Actions: login, logout, refreshUser
- Async thunk для авторизации
- Persist state в localStorage

#### Users Slice
- Состояние: loading, error
- Async thunks для всех API операций с пользователями
- Selectors для получения состояния

### 3. Тестирование
- [ ] Создать тестовую страницу для проверки работоспособности
- [ ] Проверить все функции Redux
- [ ] Убедиться в сохранении текущей логики

### 4. Миграция компонентов
- [ ] Обновить App.jsx для использования Redux Provider
- [ ] Обновить компоненты для использования Redux вместо Context API
- [ ] Удалить старые контексты после успешной миграции

### 5. Финальная проверка
- [ ] Проверить работоспособность и протестировать
- [ ] Убедиться что все функции работают как раньше
- [ ] Проверить производительность

## Преимущества миграции
1. Централизованное состояние
2. Упрощённая асинхронная работа с createAsyncThunk
3. Лучшая производительность с memoized selectors
4. Упрощённый код без необходимости вручную управлять состоянием
5. Лучшая поддержка и отладка